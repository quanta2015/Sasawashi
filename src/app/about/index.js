import React,{useState,useEffect} from 'react';import { inject,observer,MobXProviderContext } from 'mobx-react'import classnames from 'classnames';import {API_SERVER} from '@/constant/apis'import {ABOUT_CONCEPT,ABOUT_EVERYDAY_CONTENT,ABOUT_FEATURE,ABOUT_WASHIKUMAZASA,COMP_DESC,SHOP_LIST} from '@/constant/data'import s from './index.module.less';import bk_shop from '@/img/shop.jpg'import TitleLine from '@/component/TitleLine'const RenderHeader =(main,sub)=>(  <div className={s.hd}>    <label>{sub}</label>    <span>{main}</span>  </div>)const RenderContent = (list) =>(  <div className={s.content}>    {list.map((item,i)=>      <p key={i}>{item.content}</p>      )    }  </div>  )const RenderSumary =(list)=>(  <div className={`${s.tab} line`}>    {list.map((item,i)=>      <div key={i} className={s.row}>        <span>{item.key}</span>        {!Array.isArray(item.val) && <span>{item.val}</span> }        {Array.isArray(item.val) &&           <div className={s.list}>            {item.val.map((o,j)=>              <div key={j} className={s.item}>                <span>{o.date}</span>                <span>{o.desc}</span>              </div>            )}          </div>        }      </div>    )}  </div>)const RenderDetail = (item)=>(  <div className={s.shopDetail}>    <div className={s.row}>      <span>{item.content}</span>    </div>  </div>)const RenderList = (list)=>(  <>  {list.map((item,i)=>    <div key={i} className={s.shopitem}>      <div className={s.img}>        <picture>          <source media="(min-width: 769px)" srcSet={item.img} />          <img src={`${item.img.split('.jpg')[0]}_sp.jpg`} />        </picture>      </div>      <div className={s.detail}>        <i>{item.title}</i>        {RenderDetail(item)}      </div>    </div>  )}  </>)const RenderMenu =(list,sel,setSel)=>(  <div className={s.menu}>    {list.map((item,i)=>      <span key={i}         className={classnames(s.area,{sel: sel===i})}         onClick={()=>setSel(i)}>{item.area}      </span>    )}  </div>)const RenderAreaList =(list,sel)=>(  <div className={s.arealist}>    {list.map((item,i)=>      <div className={s.areaitem}>        <label>{item.name}</label>        <div className={s.wrap}>          {RenderDetail(item)}        </div>      </div>    )}  </div>)const About = () => {  const { store } = React.useContext(MobXProviderContext)  const [sel,setSel] = useState(0)  let conceptList = []  ABOUT_CONCEPT.map(o=>    conceptList.push(o))  let shopList = []  SHOP_LIST.map(item=>{    item.list.map(o=>{      if (o.img) {        shopList.push(o)      }    })  })  let sasawashiList = []  ABOUT_WASHIKUMAZASA.map(item=>{    sasawashiList.push(item)  })    return (    <section>      <div className={s.about}>        <div className={s.header}>          <div className={s.info }>            <h1>About</h1>            <span>ささ和紙について</span>          </div>          <div className={s.bg}>            <picture>              <source media="(min-width: 769px)" srcSet="https://gigaplus.makeshop.jp/sasawashi/img/about/mv.jpg" />              <img src="https://gigaplus.makeshop.jp/sasawashi/img/about/mv.jpg" />            </picture>          </div>        </div>        <div className={s.sect}>          {RenderHeader('ものづくりへの想い','Concept')}          {RenderContent(conceptList)}        </div>        <div className={s.gallery}>          <picture>            <source media="(min-width: 769px)" srcSet="https://gigaplus.makeshop.jp/sasawashi/img/about/gallery_01.jpg" />            <img src="https://gigaplus.makeshop.jp/sasawashi/img/about/gallery_01_sp.jpg" />          </picture>                  </div>        <div className={s.sect}>          {RenderHeader('ささ和紙がくれる心地よさ','Comfortable Everyday')}          {RenderContent(ABOUT_EVERYDAY_CONTENT)}        </div>        <div className={s.sect}>          {RenderList(ABOUT_FEATURE)}        </div>                <div className={s.gallery}>          <picture>            <source media="(min-width: 769px)" srcSet="https://gigaplus.makeshop.jp/sasawashi/img/about/gallery_02.jpg" />            <img src="https://gigaplus.makeshop.jp/sasawashi/img/about/gallery_02_sp.jpg" />          </picture>                      </div>        <div className={s.sect}>          {RenderHeader('和紙とくまざさ','Washi & Kumazasa')}          {RenderList(sasawashiList)}        </div>        <div className={s.sect}>          {RenderHeader('ささ和紙ができるまで','SASAWASHI Until')}          {/*{RenderList(shopList)}*/}        </div>      </div>    </section>      )}export default  inject('store')(observer(About))